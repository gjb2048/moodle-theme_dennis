{"version":3,"file":"serverdatetime.min.js","sources":["../src/serverdatetime.js"],"sourcesContent":["//\n// This file is part of Adaptable theme for moodle\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n//\n\n//\n// Dennis theme.\n//\n// @package    theme_dennis\n// @copyright  &copy; 2020-onwards G J Barnard.\n// @author     G J Barnard - {@link https://moodle.org/user/profile.php?id=442195}\n// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n//\n\nimport Ajax from 'core/ajax';\nimport log from 'core/log';\nimport Notification from 'core/notification';\n\nconst serverdatetime = () => {\n    var sdtb = document.getElementById('serverdatetimebtn');\n    var tsdt = document.getElementById('theserverdatetime');\n\n    if ((sdtb !== null) && (tsdt !== null)) {\n        sdtb.addEventListener(\"click\", function() {\n            Ajax.call(\n                [{\n                    methodname: 'theme_dennis_server_datetime',\n                    args: []\n                }])[0].done(function(response) {\n                    log.debug('Dennis Server DateTime: ' + response.datetime);\n                    // We have the data now update the UI.\n                    tsdt.innerHTML = response.datetime;\n                }).fail(function(ex) {\n                    Notification.exception(new Error('Dennis Server DateTime request failed: ' +\n                    ex.errorcode + ' - ' + ex.error + ' - ' + ex.debuginfo + ' - ' + ex.stacktrace));\n                    return;\n                }\n            );\n        });\n    } else {\n        log.debug('Dennis ServerDateTime: No button on text box.');\n    }\n};\n\nexport const serverdatetimeInit = (currentdatetime) => {\n    log.debug('Dennis ServerDateTime AMD: ' + currentdatetime);\n\n    if (document.readyState !== 'loading') {\n        log.debug(\"Dennis ServerDateTime ES6 init DOM content already loaded\");\n        serverdatetime();\n    } else {\n        log.debug(\"Dennis ServerDateTime ES6 init JS DOM content not loaded\");\n        document.addEventListener('DOMContentLoaded', function () {\n            log.debug(\"Dennis ServerDateTime ES6 init JS DOM content loaded\");\n            serverdatetime();\n        });\n    }\n};\n"],"names":["serverdatetime","sdtb","document","getElementById","tsdt","addEventListener","call","methodname","args","done","response","debug","datetime","innerHTML","fail","ex","exception","Error","errorcode","error","debuginfo","stacktrace","currentdatetime","readyState"],"mappings":";;2NA8BMA,eAAiB,SACfC,KAAOC,SAASC,eAAe,qBAC/BC,KAAOF,SAASC,eAAe,qBAErB,OAATF,MAA4B,OAATG,KACpBH,KAAKI,iBAAiB,SAAS,yBACtBC,KACD,CAAC,CACGC,WAAY,+BACZC,KAAM,MACN,GAAGC,MAAK,SAASC,uBACbC,MAAM,2BAA6BD,SAASE,UAEhDR,KAAKS,UAAYH,SAASE,YAC3BE,MAAK,SAASC,0BACAC,UAAU,IAAIC,MAAM,0CACjCF,GAAGG,UAAY,MAAQH,GAAGI,MAAQ,MAAQJ,GAAGK,UAAY,MAAQL,GAAGM,gCAM5EV,MAAM,8EAIiBW,+BAC3BX,MAAM,8BAAgCW,iBAEd,YAAxBpB,SAASqB,yBACLZ,MAAM,6DACVX,gCAEIW,MAAM,4DACVT,SAASG,iBAAiB,oBAAoB,wBACtCM,MAAM,wDACVX"}